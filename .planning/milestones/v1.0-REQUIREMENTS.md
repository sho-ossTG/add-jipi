# Requirements Archive: v1.0 MVP Hardening

**Archived:** 2026-02-22
**Status:** SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, create a new `.planning/REQUIREMENTS.md` in the next milestone workflow.

---

# Requirements: add-jipi

**Defined:** 2026-02-21
**Core Value:** Users can reliably request a supported episode and immediately receive a valid playable stream.

## v1 Requirements

Requirements for initial release hardening. Each maps to roadmap phases.

### Contract Compatibility

- [x] **CONT-01**: User can install the addon and receive a valid `manifest.json` response compatible with Stremio clients. (validated)
- [x] **CONT-02**: User can browse catalog entries and receive valid catalog payloads for supported content. (validated)
- [x] **CONT-03**: User requesting a supported episode receives a protocol-valid stream response. (validated)

### Security

- [x] **SECU-01**: Operator can access diagnostics routes only after authenticated and authorized admin checks. (validated)
- [x] **SECU-02**: User requests are attributed to trusted client identity, not spoofable forwarded headers. (validated)
- [x] **SECU-03**: Sensitive diagnostics data is redacted so public routes never expose raw IPs or internal error details. (validated)
- [x] **SECU-04**: Browser clients only receive CORS permissions for explicitly allowed origins and headers. (validated)

### Reliability

- [x] **RELY-01**: User stream requests enforce capacity/session policy with atomic Redis-backed gating under concurrency. (validated)
- [x] **RELY-02**: User stream resolution uses bounded dependency calls (timeouts and retry limits) to avoid hung requests. (validated)
- [x] **RELY-03**: User receives deterministic fallback behavior when broker or Redis dependencies fail. (validated; live outage runbook captured for manual execution)

### Observability

- [x] **OBSV-01**: Operator can trace failed or degraded requests using correlation IDs across request, policy, and dependency calls. (validated)
- [x] **OBSV-02**: Operator can see structured failure categories that distinguish broker, Redis, validation, and policy failures. (validated)
- [x] **OBSV-03**: Operator can query health and key reliability metrics without exposing sensitive internals. (validated)

### Maintainability and Quality

- [x] **MAINT-01**: Maintainer can modify routing, policy, integration, and presentation code in separate modules with clear boundaries. (validated)
- [x] **MAINT-02**: Maintainer can run automated tests covering stream contract behavior and failure branches before deployment. (validated)
- [x] **MAINT-03**: Maintainer can reproduce core policy time-window and session-gating behavior with deterministic tests. (validated)

## Deferred Beyond v1.0

### Operational Maturity

- [ ] **OPER-01**: Operator receives proactive alerting dashboards with SLO-based thresholds.
- [ ] **OPER-02**: Operator can run policy dry-run simulations for capacity rules without affecting live traffic.

### Product Expansion

- [ ] **PROD-01**: User can stream additional content domains beyond current supported title pattern.
- [ ] **PROD-02**: Tenant admins can manage multi-tenant policies and billing controls.

## Out of Scope (v1.0)

| Feature | Reason |
|---------|--------|
| Public unauthenticated diagnostics dashboard | Security and privacy risk; conflicts with production hardening goals |
| Native mobile app client | Project scope is backend addon service, not client application development |
| Unbounded dependency retries | Increases outage blast radius and latency under failure conditions |

## Traceability

| Requirement | Phase | Final Status |
|-------------|-------|--------------|
| CONT-01 | Phase 1 | Complete |
| CONT-02 | Phase 1 | Complete |
| CONT-03 | Phase 1 | Complete |
| SECU-01 | Phase 2 | Complete |
| SECU-02 | Phase 2 | Complete |
| SECU-03 | Phase 2 | Complete |
| SECU-04 | Phase 2 | Complete |
| RELY-01 | Phase 3 | Complete |
| RELY-02 | Phase 3 | Complete |
| RELY-03 | Phase 3 | Complete |
| OBSV-01 | Phase 4 | Complete |
| OBSV-02 | Phase 4 | Complete |
| OBSV-03 | Phase 4 | Complete |
| MAINT-01 | Phase 5 | Complete |
| MAINT-02 | Phase 5 | Complete |
| MAINT-03 | Phase 5 | Complete |

---

## Milestone Summary

**Shipped:** 16 of 16 v1 requirements
**Adjusted:** No requirement-level scope reductions; non-blocking operational validation moved into explicit manual runbooks in phase 6.
**Dropped:** None

---
*Archived: 2026-02-22 as part of v1.0 milestone completion*
