# Milestone v1.0: MVP Hardening

**Status:** SHIPPED 2026-02-22
**Phases:** 1-6
**Total Plans:** 18

## Overview

This milestone hardened the existing addon without breaking Stremio compatibility, moving from contract stability to security boundaries, deterministic reliability controls, operator-safe observability, modular maintainability, and final audit debt closure.

## Phases

### Phase 1: Contract Compatibility Baseline

**Goal**: Users can install and use the addon with protocol-valid manifest, catalog, and stream responses for supported episodes.
**Depends on**: Nothing (first phase)
**Plans**: 2 plans

Plans:

- [x] 01-01: Harden manifest/catalog compatibility and add automated contract checks.
- [x] 01-02: Harden stream contract behavior and verify Stremio client flow.

### Phase 2: Security Boundary Hardening

**Goal**: Operational and admin capabilities are only available to authorized operators, with trusted client attribution and minimal exposure.
**Depends on**: Phase 1
**Plans**: 2 plans

Plans:

- [x] 02-01: Add operator auth gating, trusted client attribution, and diagnostics/public redaction with security contract tests.
- [x] 02-02: Enforce explicit CORS allowlist and preflight behavior with CORS contract tests.

### Phase 3: Stream Reliability Controls

**Goal**: Stream resolution remains deterministic and protocol-safe under concurrency and dependency degradation.
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:

- [x] 03-01: Implement atomic concurrency gating and bounded dependency execution with reliability contract tests.
- [x] 03-02: Enforce deterministic degraded response mapping and latest-request-wins reliability behavior.

### Phase 4: Observability and Diagnostics

**Goal**: Operators can quickly diagnose failed or degraded behavior through correlated, structured, and safely exposed telemetry.
**Depends on**: Phase 3
**Plans**: 3 plans

Plans:

- [x] 04-01: Add request-scoped correlation telemetry and canonical failure taxonomy with observability contracts.
- [x] 04-02: Expose operator-safe health/metrics diagnostics with redaction and auth-boundary contracts.
- [x] 04-03: Close diagnostics projection wiring gap for `/health/details` and lock projector-aligned health contract tests.

### Phase 5: Modularization and Test Governance

**Goal**: Maintainers can change core backend concerns safely with modular boundaries and deterministic test coverage.
**Depends on**: Phase 4
**Plans**: 6 plans

Plans:

- [x] 05-01: Scaffold boundary policy/integration modules and document import-direction rules.
- [x] 05-02: Scaffold routing/presentation module roots and publish module export map.
- [x] 05-03: Rewire request-controls through modular policy/integration boundaries.
- [x] 05-04: Rewire stream orchestration/presentation with thin entrypoint composition.
- [x] 05-05: Modularize operator/public routing and presentation and finalize boundary examples.
- [x] 05-06: Add deterministic policy tests and required pre-deploy contract/failure test gates.

### Phase 6: Milestone Audit Cleanup

**Goal**: Milestone 1.0 non-blocking audit debt is captured as executable cleanup work, with explicit live-environment verification checklists and commands that can be run outside this machine.
**Depends on**: Phase 5
**Plans**: 3 plans

Plans:

- [x] 06-01: Create manual Stremio live-verification checklist and evidence capture workflow.
- [x] 06-02: Create broker/Redis outage verification checklist with commands and expected outcomes.
- [x] 06-03: Resolve `modules/index.js` informational-surface tech debt with low-risk cleanup.

---

## Milestone Summary

**Decimal Phases:**

- None

**Key Decisions:**

- Keep hardening incremental and contract-safe rather than rewriting runtime architecture.
- Gate operator diagnostics behind explicit auth and sanitize public failure surfaces.
- Use atomic Redis admission and bounded broker calls for deterministic reliability behavior.
- Move to modular routing/policy/integration/presentation boundaries with deterministic required test gates.
- Capture live-network verification as explicit manual runbooks under the offline execution constraint.

**Issues Resolved:**

- Closed `/health/details` diagnostics projector wiring gap with contract coverage.
- Eliminated ambiguity around `modules/index.js` by documenting it as maintainer-only manifest metadata.
- Added deterministic policy and stream-failure test coverage with required deployment gate script.

**Issues Deferred:**

- Manual live Stremio client verification must be executed on a network-enabled tester machine.
- Manual broker/Redis outage validation must be executed on a network-enabled tester machine.

**Technical Debt Incurred:**

- No blocker debt remains for v1.0 shipment; deferred items are operational manual checks tracked in phase 6 runbooks.

---

_For current project status, see .planning/ROADMAP.md_
